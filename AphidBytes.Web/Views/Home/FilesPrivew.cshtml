@{
    Layout = "~/Views/Shared/_LayoutNoHeaderFooter.cshtml";
}
@model AphidBytes.Accounts.Contracts.Model.BasicGenerateCloneModel

@*LoginPopup*@
<div class="logindiv" style="display: none; position: fixed; margin-left: -9%;">

    <div id="ad_content" class="div_ad" style="position: fixed; margin-left: -9%; background-color: teal; width: 17%; height: 35%;">
        <img src="/Images/close.png" style="position: absolute; margin-left: 94%; margin-top: -7%;" onclick="loginhide()"/>
        <div style="color: white; margin-left: 11%; margin-top: 18%;">
            UserName:<input type="text" id="uname1"></input>
        </div>
        <div style="color: white; margin-left: 11%; margin-top: 2%;">
            Password:<input type="text" id="pass1"></input>
        </div>
        <div style="margin-top: 12%; margin-left: 52%;">
            <input id="loginbtn1" type="button" value="Login" />
        </div>
    </div>


</div>
@*LoginPopup*@

<div class="showadd" style="height: 70%; width: 50%; display: none;" id="logindiv_id">
    <div class="black_screen"></div>
    <img src="/Images/close.png" style="position: absolute; margin-left: 195%;cursor:pointer;" onclick="loginhide()" />
    <div class="in_register_login">

        <div class="n_register_log">
            <ul>
                <li>
                    <label for="Company Logo">Username:</label>
                    <input type="text" id="uname" size="30" style="margin-left: -4%;" />
                </li>
                <li>
                    <label for="Company Name">Password:</label>
                    <input type="password" id="pass" size="30" style="margin-left: -4%;" />
                    <label id="labl" style="color:#ffc000; width:-21%; width: 50%;margin-top: 33px; margin-left: -18%"></label>
                </li>
            </ul>
        </div>
        <div class="n_log_pic">
            <samp>
                <img src="/images/log_frame.png">
            </samp>
            <samp class="log_arrow">
                <img src="/images/s_icon.png">
            </samp>
            <samp class="log_arrow2">LOGIN </samp>
        </div>
        <div class="n_register2_login">
            <p class="rg_right_2">@Html.ActionLink("Forgot Password?", "ForgetPassword", "Accounts")</p>
            <div class="loe">
                <input type="button" id="loginbtn" class="n_submitBtnLogin" value="">
                <br />
                <p class="rg_text">
                    Don’t have an account?
                    <samp class="rg_text_color">@Html.ActionLink("Sign Up/Register", "SignUp", "Home") </samp>
                </p>
            </div>
        </div>
    </div>
</div>



<div class="black_screen" style="display: none; opacity:0.3;"></div>
<div id="closeboxa" style="display: none">
    <img src="/img/overboxbg.png">
    <div class="closetext">
        <a href="#" id="closebta">
            <img src="/img/close.png" onclick="DialogCloseFunction()"></a>
        <div class="texmpi-c">
            <img src="/img/mixbotton.png">
        </div>
        <ul id="addpl" class="texmpi-ct">
        </ul>
        <div class="effectpic">
            <img src="/img/effectsbg.png">
        </div>
    </div>

</div>


<div id="new_pop_d"  style="display:none; position:absolute; z-index:999; margin-top:17%; margin-left:30%;" onclick="$(this).hide();">
<img src="/Images/Success_Button_d.png" style="width:60%;"/>
</div>

<div id="new_pop"  style="display:none; position:absolute; z-index:999; margin-top:17%; margin-left:30%;" onclick="$(this).hide();">
<img src="/Images/Success_Button_c.png" style="width:60%;"/>
</div> 


<div class="aphidtise_wrap" >

    <div class="logid">

        <div class="logid_out">
            <ul>
                @*  <li><a href="#">@{ var username = AphidBytes.Web.Session_Helper.AphidSession.Current.AuthenticatedUser.Identity.Username; } @username</a></li>
                <li><a href="~/Accounts/Logout">Logout</a></li>*@
            </ul>
        </div>

    </div>
</div>
<div class="socialsetupwrap" style="width: 100%;">
    <div style="width: 20%; float: left; margin: 30px 25px 0;">
        <div class="logosocila">
            <img src="/Images/bphidbyte_sicon2.png"></div>
        <div class="tophedboxa">
            <p onclick="goBack()" style="color: #FFC000; cursor: pointer">Back</p>
        </div>
    </div>

    <div class="socialhead-view">
        <div class="matrix-viewbox3">

            <div class="mviewboxa">
                <div class="mview-pic">
                    <img src="@Model.MatrixImageBytePath"/></div>
                <div class="mview-rightbox">
                    <div id="explicit_content" class="e_p_t1" style="display: none;">
                        <img src="/Images/e_icon.png" /></div>
                    <p>@Model.Title<br>
                        @Model.ArtistName<br>
                        @Model.AlbumTitle<br>
                        www.aphidbyte.com/JayZ
                    </p>
                    <p style="color: #e46c0a; margin-top: 10px;">Tracking #:@Model.TrackingNumber</p>
                    <div class="view-channel">
                        @if (Model.GenCloneType == "2")
                        {
@*<a href="#">  <img src="/Images/view-channel.png" id="@Model.UserID" onclick="AddChannelToUserList('@Model.UserID')"></a> *@
                            <a href="/Home/ShowChannel?UserID=@Model.UserID">
                                <img src="/Images/view-channel.png" id="@Model.UserID" ></a> 
                        }
                    </div>
                </div>

                <div class="aphid-c">
                    <img src="/Images/aphid-teclogo.png">
                    <p>Return to The Gall</p>
                </div>
            </div>


            <div class="mviewboxb">
                <p><a href="#">Files</a></p>
                <samp id="greenbu"><a>
                    <img src="/Images/green.png" onclick="loginfun()"></a></samp>
                <div class="mview-mp">
                    <img src="@Model.MatrixImageBytePath"/></div>
                @*<div id="play-p"><img src="/Images/play-pic.png"></div>*@


            </div>

            <div class="mviewboxc">
                @*<img src="/Images/amazone-p.png">
<p>$0.87</p>
<img src="/Images/itunes.png">
<p>$1.29</p>
<img src="/Images/googleplay.png">
<p>$0.99</p>*@

                <a href="@Model.VideoFile" id="avail_Down">
                    <img id="imageDownload" src="" style="width: 25%; margin-top: 282px; height: auto;">
                    <script>
                        var filename = '@Model.VideoFile';
                        filename = filename.substr(filename.lastIndexOf('/') + 1);
                        $('#avail_Down').attr('download', filename);
                        if ('@Model.AvailableDownload' == 'Yes') {
                                var i = "/Images/dwonload.png";
                                $('#imageDownload').attr('src', i);
                            } else {
                                var i = "/Images/dwonloadbw.png";
                                $('#imageDownload').attr('src', i);
                                $('#avail_Down').click(function (e) {
                                    e.preventDefault();
                                });
                            }
                            if (('@Model.ExplicitContent' == '1') || ('@Model.ExplicitContent' == 'Yes')) {
                            $('#explicit_content').show();
                        } else {
                            $('#explicit_content').hide();
                        }
                    </script>
                </a>
                <img src="/Images/favopiv.png" style="width: 22%; height: auto; margin-top: 295px;">
                <p style="margin-top: 302px;">REPORT</p>




            </div>

        </div>


    </div>


    <div class="mview-footer">
        <samp>People who viewed this also viewed</samp>
        <div class="fram-m">
            <div id='prev' class="mecnext_s" style="width: 10%; float: left;">
                <img src="/Images/prev_s.png"></div>
            <div id="slider1" style="width: 80%; float: left; height: 90px;">

                <div class="slli-main">
                    <div class="fram-s">
                        <img src="/Images/framepic1.png" class="fram-sf"></div>
                    <div class="fram-s">
                        <img src="/Images/framepic2.png" class="fram-sf"></div>
                    <div class="fram-s">
                        <img src="/Images/framepic3.png" class="fram-sf"></div>
                </div>

                <div class="slli-main">
                    <div class="fram-s">
                        <img src="/Images/Jay-Z-pic.png" class="fram-sf"></div>
                    <div class="fram-s">
                        <img src="/Images/framepic2.png" class="fram-sf"></div>
                    <div class="fram-s">
                        <img src="/Images/framepic2.png" class="fram-sf"></div>
                </div>

                <div class="slli-main">
                    <div class="fram-s">
                        <img src="/Images/Jay-Z-pic.png" class="fram-sf"></div>
                    <div class="fram-s">
                        <img src="/Images/framepic2.png" class="fram-sf"></div>
                    <div class="fram-s">
                        <img src="/Images/framepic2.png" class="fram-sf"></div>
                </div>


            </div>
            <div id='next' class="mecnext_s" style="width: 10%; float: left;">
                <img src="/Images/next_s.png"></div>
        </div>


    </div>
</div>


<div class="m-footer">

    <ul class="navlinksm_b">
        <li><a href="#">Advertise</a></li>
        <li><a href="#">Store</a></li>
        <li><a href="#">Terms</a></li>
        <li><a href="#">Privacy Policy  </a></li>
        <li><a href="#">Sponsoring</a></li>
    </ul>


</div>


</div>


<script lang="javascript">
    $(document).ready(function () {

        $('#slider1').cycle({
            fx: 'scrollHorz', //'scrollLeft,scrollDown,scrollRight,scrollUp',blindX, blindY, blindZ, cover, curtainX, curtainY, fade, fadeZoom, growX, growY, none, scrollUp,scrollDown,scrollLeft,scrollRight,scrollHorz,scrollVert,shuffle,slideX,slideY,toss,turnUp,turnDown,turnLeft,turnRight,uncover,ipe ,zoom
            speed: 'slow',
            timeout: 0,
            next: '#next',
            prev: '#prev',
            pager: '#thumb',

            pagerAnchorBuilder: function (idx, slide) {
                return '<li><a href="#"><img src="' + slide.src + '" width="60" height="60" /></a></li>';
            }
        });



    });
</script>
<script>
    function goBack() {
        window.history.back()
    }

    @{ var username = AphidBytes.Web.Session_Helper.AphidSession.Current.AuthenticatedUser.Identity.Username; }

    function loginfun() {
        $('#labl').text("");
        $('#pass').val("");
        $('#uname').val("");
        $.post('/Home/CheckSession').done(function (data) {
            if (data == 'NotExists') {
                $('#logindiv_id').attr('style', 'display:block;');
            }
            else {
                var a = '@username';
                alert("Logged in as : " + a + " ?");
                plalist_show();
            }
        });
    }

    function loginhide() {
        $('#logindiv_id').attr('style', 'display:none;');
    }
    function plalist_show() {
        var plCount = 0;
        $.post('/Basic/totalplaylist').done(function (count) {
            plCount = count;
        });
        var htmldialogcontent = '';
        $.post('/Basic/GetPlayList', { TrackingID: '@Session["Trackingnumber"]' }, function () {
        }).done(function (dataa) {
            if (dataa.length > 0) {
                htmldialogcontent = '';
                var i = 0;
                while (i < dataa.length) {

                    htmldialogcontent += '<li class="playname_dialogbox" id="' + dataa[i].toString() + '">' + dataa[i].toString() + '</li>';

                    i++;
                }
                if (plCount < 15) {
                    htmldialogcontent += '<p id="editable_name"> Create Playlist</p>';
                }
            } else {
                htmldialogcontent = '';
                if (plCount < 15) {
                    htmldialogcontent += '<p id="editable_name"> Create Playlist</p>';
                }
                else {
                    htmldialogcontent += '<p> playlist count full   </p>';
                }

            }
            $("#addpl").empty();
            $("#addpl").append(htmldialogcontent);
            $(".black_screen").show();
            $("#closeboxa").show();
        });


    }
    var track = '@Session["Trackingnumber"]';
    $('#loginbtn').click(function () {
        var u = $('#uname').val();
        var p = $('#pass').val();
        if (u == "" && p != "") {

            $('#labl').text("Enter UserName");
            // $('#loginbtn').attr('disabled', 'disabled');
        }

        if (u == "" && p == "") {

            $('#labl').text("Enter UserName or Password");
            // $('#loginbtn').attr('disabled', 'disabled');
        }

        if (u != "" && p == "") {

            $('#labl').text("Enter Password");
            // $('#loginbtn').attr('disabled', 'disabled');
        }

        if ((u != "") && (p != "")) {
            loginhide();
            var htmldialogcontent = '';

            $.post('/Home/logmein', { uname: u, pass: p, trackid: track }, function () { }).done(function (dat) {
                var a = dat;
                if (a == true) {
                    plalist_show();
                }
                else if (a == false) {
                    $('#logindiv_id').show();

                    $('#labl').text("UserName or Password InCorrect");

                }
                else {



                }


            });
        }

    });

    $("#addpl").on('click', '.playname_dialogbox', function () {
        var newPlayName = $(this).text();
        var resultFetched = false;
        $.post('/Basic/AddSongToPlaylist', { PlaylistName: newPlayName, TrackingID: '@Session["Trackingnumber"]' }, function (dat) {
            resultFetched = dat;
        }).done(function () {
            if (resultFetched == true) {
                $("#new_pop").show();
                //alert("File added to playlist..");
                $("#closeboxa").hide();
                $(".black_screen").hide();
            }
            else {
                $("#new_pop_d").show();
                //alert("Error Adding to Playlist..");
                $("#closeboxa").hide();
                $(".black_screen").hide();
            }
        });

     });
    //for editableText content
    $("#addpl").on('dblclick', '#editable_name', function () {
        var ele = document.getElementById('editable_name');
        var temp = ele.innerHTML;
        var textBox = document.createElement('INPUT');
        textBox.setAttribute('type', 'text');
        textBox.value = ele.innerHTML;
        textBox.onchange = function () {
            var newValue = this.value;
            this.parentNode.innerHTML = newValue;
            alert("Your new value: \n\n" + newValue);
            ele.innerHTML = temp;
            var htmldialogcontent = '';
            htmldialogcontent += '<li class="playname_dialogbox"> ' + newValue + '</li>';
            $("#addpl").append(htmldialogcontent);
        }

        this.innerHTML = '';

        this.appendChild(textBox);
    });
    // end for editableText content

    function DialogCloseFunction() {
        $("#closeboxa").hide();
        $(".black_screen").hide();

    }

</script>
